<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>âœ¿ Evy Ng âœ¿</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div id="aboutModal" class="modal">
  <div class="modal-content">
    <h2>About Me</h2>
    <p>Hi, I'm Evy! (Pronounced like the PokÃ©mon) Currently, I'm pursuing a major in Computer Science at the University
      of Colorado, Boulder with a minor in Creative Technology and Design. I have a passion for game development and
      interactive media. I love creating immersive experiences that blend technology and creativity.</p>
    <p>In my free time, I enjoy creating art, playing video games, and making fun memories with friends. I'm always looking
      for new challenges and opportunities to learn and grow in the field.</p>
    <p>Contact: evy.ng2003@gmail.com</p>
    <button class="close-btn" onclick="closeModal('aboutModal')">Close</button>
  </div>
</div>

<div id="projectsModal" class="modal">
  <div class="browser">
    <h2>Projects</h2>
    <p>List your projects here!</p>
    <button class="close-btn" onclick="closeModal('projectsModal')">Close</button>
  </div>
</div>

<div id="experienceModal" class="modal">
  <div class="modal-content">
    <h2>Experience</h2>
    <p>Share your work experience here!</p>
        <div style="margin: 15px 0;">
      <a href="resume.pdf" download="Evy_Ng_Resume.pdf" 
         style="background: #007bff; color: white; padding: 10px 20px; 
                text-decoration: none; border-radius: 5px; 
                display: inline-block; margin-right: 10px;">
        ðŸ“„ Download Resume
      </a>
    </div>
    <button class="close-btn" onclick="closeModal('experienceModal')">Close</button>
  </div>
</div>

<script src="https://unpkg.com/kaboom/dist/kaboom.js"></script>
<script>

function openModal(id)
{
  document.getElementById(id).style.display = "flex";
}

function closeModal(id)
{
  document.getElementById(id).style.display = "none";
}

//initialize Kaboom
kaboom({
  width: 800,
  height: 480,
  background: [0, 0, 0],
  scale: 2
});

//loading art assets
loadSprite("room", "room.png");    
loadSprite("location", "location.png");

loadSprite("player_front", "player_front.png",
{
  sliceX: 3,
  anims: {
    idle: { from: 0, to: 0 },
    walk: { from: 0, to: 2, loop: true }
  }
});

loadSprite("player_back", "player_back.png",
{
  sliceX: 3,
  anims: {
    idle: { from: 0, to: 0 },
    walk: { from: 0, to: 2, loop: true }
  }
});

loadSprite("player_left", "player_left.png",
{
  sliceX: 3,
  anims: {
    idle: { from: 0, to: 0 },
    walk: { from: 0, to: 2, loop: true }
  }
});

loadSprite("player_right", "player_right.png",
{
  sliceX: 3,
  anims: {
    idle: { from: 0, to: 0 },
    walk: { from: 0, to: 2, loop: true }
  }
});

add([
  sprite("room"),
  z(0),
  pos(0, 0)
]);

//create location markers
const projectsLocation = add([
  sprite("location"),
  pos(164, 100),
  scale(0.5),
  z(2),
  area(),
  "hotspot"
]);

const experienceLocation = add([
  sprite("location"),
  pos(164, 260),
  scale(0.5),
  z(2),
  area(),
  "hotspot"
]);

const aboutLocation = add([
  sprite("location"),
  pos(615, 300),
  scale(0.5),
  z(2),
  area(),
  "hotspot"
]);

//defaulting player 
let currentDir = "front";
const player = add([
  sprite("player_front"),
  pos(640, 125),
  z(1), 
  scale(1.5),
  area()
]);

player.play("idle");

const SPEED = 80;

//set player direction and animation
function setDirection(dir, anim)
{
  if (currentDir !== dir) 
  {
    player.use(sprite("player_" + dir));
    currentDir = dir;
    player.play(anim);
  }
}

//movement
onKeyDown("left", () =>
{
  setDirection("left", "walk");
  player.move(-SPEED, 0);
});

onKeyDown("right", () => {
  setDirection("right", "walk");
  player.move(SPEED, 0);
});

onKeyDown("up", () => {
  setDirection("back", "walk");
  player.move(0, -SPEED);
});

onKeyDown("down", () => {
  setDirection("front", "walk");
  player.move(0, SPEED);
});

//stop walking animation when no keys are pressed
onKeyRelease(() => {
  if (
    !isKeyDown("left") &&
    !isKeyDown("right") &&
    !isKeyDown("up") &&
    !isKeyDown("down")
  ) {
    player.play("idle");
  }
});

//tracking to prevent multiple modals from opening
let modalCooldowns =
{
  about: false,
  projects: false,
  experience: false
};

//hotspot collisions
player.onCollide("hotspot", (hotspot) => {
  console.log("Collision detected with hotspot at:", hotspot.pos);
  
  if (hotspot === aboutLocation && !modalCooldowns.about)
  {
    openModal("aboutModal");
    modalCooldowns.about = true;
    setTimeout(() => { modalCooldowns.about = false; }, 1000); 
  }
  else if (hotspot === projectsLocation && !modalCooldowns.projects)
  {
    openModal("projectsModal");
    modalCooldowns.projects = true;
    setTimeout(() => { modalCooldowns.projects = false; }, 1000);
  } 
  else if (hotspot === experienceLocation && !modalCooldowns.experience)
  {
    openModal("experienceModal");
    modalCooldowns.experience = true;
    setTimeout(() => { modalCooldowns.experience = false; }, 1000);
  }
});

</script>

</body>
</html>
